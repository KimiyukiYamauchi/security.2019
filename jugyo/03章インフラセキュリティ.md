# 3章　インフラセキュリティ
## 3.1 TCP/IP 基礎
### 3.1.1 ネットワークモデル

OSI基本参照モデル | TCP／IPネットワークモデル | 代表的なプロトコル | ネットワーク機器 | アドレス
--- | --- | --- | --- | ---
アプリケーション層 | アプリケーション層 | HTTP, SMTP, FTP, SNMP, DNS
プレゼンテーション層 | ↑ | ↑
セッション層 | ↑ | ↑
トランスポート層 | トランスポート層 | TCP, UDP |  | ポート番号
ネットワーク層 | インターネット層 | IP, ICMP, ARP | ルータ | IPアドレス
データリンク層 | ネットワーク・インタフェース層 | Ethernet, FDDI | スイッチングHUB | MACアドレス
物理層 | ↑ | ↑ | リピータHUB

### 3.1.2 階層化によるデータの流れ
### 3.1.3 TCP/IP
葉書の宛名に例えると...

	住所 => IPアドレス
	氏名 => ポート番号

電話番号に例えると...

	外線番号 => グローバルアドレス
	内線番号 => プライベートアドレス

#### IPアドレス
- IPv4
	- 32ビット
	- 42億
	- グローバルアドレス
		- インターネット上でユニーク
	- プライベートアドレス
		- LAN上でユニーク
		- 10.0.0.0 - 10.255.255.255
			- 0 => 00000000
			- 255 => 11111111
		- 172.16.0.0 - 172.31.255.255
			- 16 => 00010000
			- 31(16+15) => 00011111
			- 0000.00000000.00000000
			- 1111.11111111.11111111
		- 192.168.0.0 - 192.168.255.255
- IPv6
	- 128ビット
	- 42億 * 42億 * 42億 * 42億

トランスポート層
<dl>
<dt>TCP</dt>
<dd><ul>
<li>コネクション型</li>
<li>信頼性を自分自身で提供</li>
<li>オーバーヘッドが大きい</li>
</ul></dd>
<dt>UDP</dt>
<dd><ul>
<li>コネクションレス型</li>
<li>上位層（アプリケーション層）に信頼性を提供させる</li>
<li>軽量</li>
</ul></dd>
</dl>

プロコトル名 | 対応するポート番号 | 使用目的
--- | --- | ---
ftp | 20/tcp<br />21/tcp | ファイル転送
telnet | 23/tcp | 遠隔操作
ssh | 22/tcp<br />22/udp | セキュアなログイン、セキュアなファイル転送(scp, sftpなど)<br />ポート転送など
smtp | 25/tcp | 電子メール送信
pop3 | 110/tcp | 電子メール受信
imap | 143/tcp | 電子メール受信
http | 80/tcp | wwwサーバ閲覧
https | 443/tcp | sslを使用した暗号化通信をするhttp
dhcp | 67/udp<br />68/udp | DHCPサーバ用<br />DHCPクライアント用
nntp | 119/tcp | ニュース送信
ntp | 123/udp | 時刻情報
snmp | 161/udp | ネットワーク経由での監視
dns | 53/udp<br />53/tcp | クエリー<br />ゾーン転送

### 3.1.4 リピータ
* あるポートから受信したデータを電気的に増幅
* データはすべてのポートに送信 => 盗聴が可能

### 3.1.5 スイッチ
* 通信相手を特定しバイパスを作成
* データがネットワーク全体に流れない => 盗聴が不可
* ミラーポート

## 3.2 VPN
Vertual Private Network: 仮想私設通信網
暗号化などの技術を使用し、インタネットなどの公衆網等、安全でないネットワークにおいて<br />
安全な通信を行うために利用

### 3.2.1 VPNの構成要素
* トンネリング（カプセル化技術）
  * IP以外
  * プライベートアドレス
* 暗号化
* 認証
	- 相手先認証 => 相手が本物なのかを確認
	- メッセージ認証 => メッセージが改ざんされていないかの確認

## 3.3 無線LAN
### 3.3.1 無線LANにおける脅威
* 通信内容の傍受（盗聴）
* 無線LANの不正利用
* アクセスポイントのなりすまし

### 3.3.2 無線LANのセキュリティ技術
* WEP => 暗号化
* MACアドレスフィルタリング => 端末の接続制限
* SSID => ネットワーク識別子
* IEEE802.1X => ユーザ認証
* TKIP => 暗号化、WEPの改善版
* AES => 暗号化、DESの後継

WEP => WPA/WPA2(Wi-Fi Aliance)

規格名 | 認証方式 | 暗号化方式
--- | --- | ---
WPA | IEEE802.1X | TKIP
WPA2 | IEEE802.1X | AES

- IEEE802.11i => セキュリティに関する規格

無線LANセキュリティ運用

- アクセスポイントと無線ＬＡＮ端末間 => 上記
- エンド - エンド => SSL, VPNなど
- 有線LANと同様の対応